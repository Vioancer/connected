(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[19],{532:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n(6),c=n(7),u=n(4),s=n(137),o=n(0),i=n(21),f=n(16),j=n.n(f),b=n(27),d=n(31),p=n.n(d),O=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get",n=arguments.length>2?arguments[2]:void 0,r=Object(o.useState)(!1),a=Object(u.a)(r,2),c=a[0],s=a[1],i=Object(o.useState)(null),f=Object(u.a)(i,2),d=f[0],O=f[1],l=Object(o.useState)(null),v=Object(u.a)(l,2),h=v[0],x=v[1];return Object(o.useEffect)((function(){(function(){var r=Object(b.a)(j.a.mark((function r(){var a;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s(!0),r.prev=1,r.next=4,p()({method:e,url:t,data:n});case 4:a=r.sent,O(a.data),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),x(h);case 11:s(!1);case 12:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(){return r.apply(this,arguments)}})()()}),[e,t,n,h]),{loading:c,serverData:d,error:h}},l=n(103),v=n(506),h=n(505);e.default=function(){var t=O("/api/v1/posts"),e=t.loading,n=t.serverData,f=t.error,j=Object(o.useState)([]),b=Object(u.a)(j,2),d=b[0],p=b[1],x=Object(o.useContext)(l.a);return Object(o.useEffect)((function(){!e&&n&&n.posts.length>0&&p(n.posts)}),[n,e]),Object(o.useEffect)((function(){x.on("newPost",(function(t){p((function(e){var n=Object(c.a)(e);return n.unshift(t),n}))})),x.on("updatedPost",(function(t){p((function(e){var n=Object(c.a)(e),r=n.findIndex((function(e){return e._id===t._id}));return n[r]=Object(a.a)({},t),n}))}))}),[x]),e?Object(r.jsx)(r.Fragment,{children:Array(10).fill(0).map((function(t,e){return Object(r.jsx)(h.a,{},e)}))}):f?Object(r.jsx)(i.a,{to:"/404"}):Object(r.jsx)(s.a,{p:{md:10,sm:4},children:d&&d.map((function(t){return Object(r.jsx)(v.a,{post:t},t._id)}))})}}}]);
//# sourceMappingURL=19.3065675c.chunk.js.map