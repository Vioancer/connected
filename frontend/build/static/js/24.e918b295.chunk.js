(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[24],{229:function(e,t,n){"use strict";var a=n(7),r=n(83),o=n(0);t.a=function(){var e=Object(r.a)(),t=e.isOpen,n=e.onOpen,i=e.onClose,s=Object(o.useState)(null),c=Object(a.a)(s,2),l=c[0],u=c[1];Object(o.useEffect)((function(){if(l){var e=setTimeout((function(){i()}),2500);return function(){return clearTimeout(e)}}}),[l,i]);return{setAlert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"info",t=arguments.length>1?arguments[1]:void 0;u({status:e,message:t}),n()},isAlertOpen:t,onAlertClose:i,alertDetails:l}}},246:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var a=n(127),r=n(135),o=n(71),i=n(272),s=n(224),c=n(0);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}var d=Object(a.a)((function(e,t){var n=e.area,a=e.templateAreas,o=e.gap,i=e.rowGap,s=e.columnGap,d=e.column,p=e.row,m=e.autoFlow,f=e.autoRows,b=e.templateRows,j=e.autoColumns,h=e.templateColumns,v=u(e,["area","templateAreas","gap","rowGap","columnGap","column","row","autoFlow","autoRows","templateRows","autoColumns","templateColumns"]),g={display:"grid",gridArea:n,gridTemplateAreas:a,gridGap:o,gridRowGap:i,gridColumnGap:s,gridAutoColumns:j,gridColumn:d,gridRow:p,gridAutoFlow:m,gridAutoRows:f,gridTemplateRows:b,gridTemplateColumns:h};return c.createElement(r.a.div,l({ref:t,__css:g},v))}));function p(e){return Object(i.a)(e,(function(e){return"auto"===e?"auto":"span "+e+"/span "+e}))}o.a&&(d.displayName="Grid");var m=Object(a.a)((function(e,t){var n=e.colSpan,a=e.colStart,o=e.colEnd,i=e.rowEnd,d=e.rowSpan,m=e.rowStart,f=u(e,["colSpan","colStart","colEnd","rowEnd","rowSpan","rowStart"]),b=Object(s.a)({gridColumn:p(n),gridRow:p(d),gridColumnStart:a,gridColumnEnd:o,gridRowStart:m,gridRowEnd:i});return c.createElement(r.a.div,l({ref:t,__css:b},f))}))},267:function(e,t,n){"use strict";var a=n(7),r=n(0),o=n(83);t.a=function(){var e=Object(r.useState)(null),t=Object(a.a)(e,2),n=t[0],i=t[1],s=Object(r.useState)(null),c=Object(a.a)(s,2),l=c[0],u=c[1],d=Object(r.useState)({}),p=Object(a.a)(d,2),m=p[0],f=p[1],b=Object(r.useState)(null),j=Object(a.a)(b,2),h=j[0],v=j[1],g=Object(o.a)(),O=g.isOpen,w=g.onClose,x=g.onOpen;Object(r.useEffect)((function(){n&&(u(URL.createObjectURL(n)),x())}),[n,x]);return{image:n,setImage:i,showImageCropper:O,closeImageCropper:w,imageSettings:m,setImageSettings:f,imageUrl:l,resetValues:function(){i(null),u(null),v(null)},setImageUrl:u,setCroppedImage:v,croppedImage:h,openImageCropper:x}}},354:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(356),r=n(0),o=Object(a.a)({viewBox:"0 0 14 14",path:r.createElement("g",{fill:"currentColor"},r.createElement("polygon",{points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"}))})},371:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(127),r=n(71),o=n(272),i=n(0),s=n(246);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var l=Object(a.a)((function(e,t){var n,a,l=e.columns,u=e.spacingX,d=e.spacingY,p=e.spacing,m=e.minChildWidth,f=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["columns","spacingX","spacingY","spacing","minChildWidth"]),b=m?(a=m,Object(o.a)(a,(function(e){return Object(r.d)(e)?null:"repeat(auto-fit, minmax("+(t=e,(Object(r.e)(t)?t+"px":t)+", 1fr))");var t}))):(n=l,Object(o.a)(n,(function(e){return Object(r.d)(e)?null:"repeat("+e+", 1fr)"})));return i.createElement(s.a,c({ref:t,gap:p,columnGap:u,rowGap:d,templateColumns:b},f))}));r.a&&(l.displayName="SimpleGrid")},516:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(3),o=n(13),i=n.n(o),s=n(22),c=n(0),l=n.n(c),u=n(251),d=n(24),p=n.n(d),m=n(225),f=n(11),b=n(200),j=n(197),h=n(263),v=n(371),g=n(271),O=n(239),w=n(517),x=n(352),y=n(127),C=n(208),S=n(59),N=n(77),I=n(135),E=n(7);n(9),n(26);!function(e){var t=new WeakMap}((function(e,t,n,a){var r="string"===typeof t?t.split("."):[t];for(a=0;a<r.length&&e;a+=1)e=e[r[a]];return void 0===e?n:e}));"undefined"===typeof window||!window.document||window.document.createElement;var P=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")};function k(e){return"function"===typeof e}var A=function(e){return"undefined"===typeof e||void 0===e};var _=!1,R=n(518),F=n(505),D=n(129),G=n(130);n(86);function M(e,t){if(null!=e)if(k(e))e(t);else try{e.current=t}catch(n){throw new Error("Cannot assign value '"+t+"' to ref '"+e+"'")}}function T(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){return M(t,e)}))}}function z(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.some((function(t){return null==t||t(e),null==e?void 0:e.defaultPrevented}))}}function L(e){var t;return function(){if(e){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];t=e.apply(this,a),e=null}return t}}L((function(e){e.condition,e.message})),L((function(e){e.condition,e.message}));function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function V(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}var q=function(e){void 0===e&&(e={});var t=e,n=t.strict,a=void 0===n||n,r=t.errorMessage,o=void 0===r?"useContext: `context` is undefined. Seems you forgot to wrap component within the Provider":r,i=t.name,s=c.createContext(void 0);return s.displayName=i,[s.Provider,function(){var e=c.useContext(s);if(!e&&a)throw new Error(o);return e},s]}({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"}),H=Object(E.a)(q,2),B=H[0],W=H[1];function Y(e){var t=W(),n=t.id,a=t.selectedIndex;return U({},e,{children:function(e){return c.Children.toArray(e).filter((function(e){return c.isValidElement(e)}))}(e.children).map((function(e,t){return c.cloneElement(e,{isSelected:t===a,id:K(n,t),"aria-labelledby":J(n,t)})}))})}function J(e,t){return e+"--tab-"+t}function K(e,t){return e+"--tabpanel-"+t}function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Q(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}var Z=Object(y.a)((function(e,t){var n=Object(C.a)("Tabs",e),a=Object(S.b)(e),r=a.children,o=a.className,i=function(e){var t=e.defaultIndex,n=e.onChange,a=e.index,r=e.isManual,o=e.isLazy,i=e.orientation,s=void 0===i?"horizontal":i,l=V(e,["defaultIndex","onChange","index","isManual","isLazy","orientation"]),u=c.useState(null!=t?t:0),d=Object(E.a)(u,2),p=d[0],m=d[1],f=Object(D.b)({defaultValue:null!=t?t:0,value:a,onChange:n,propsMap:{value:"index",defaultValue:"defaultIndex",onChange:"onChange"}}),b=Object(E.a)(f,2),j=b[0],h=b[1];c.useEffect((function(){A(a)||m(a)}),[a]);var v=Object(F.b)(),g=Object(F.b)();return{id:Object(G.a)(e.id,"tabs"),selectedIndex:j,focusedIndex:p,setSelectedIndex:h,setFocusedIndex:m,isManual:r,isLazy:o,orientation:s,enabledDomContext:v,domContext:g,htmlProps:l}}(Q(a,["children","className"])),s=i.htmlProps,l=Q(i,["htmlProps"]),u=c.useMemo((function(){return l}),[l]),d=function(e,t){var n={};return Object.keys(e).forEach((function(a){t.includes(a)||(n[a]=e[a])})),n}(s,["isFitted"]);return c.createElement(B,{value:u},c.createElement(N.b,{value:n},c.createElement(I.a.div,X({className:P("chakra-tabs",o),ref:t},d,{__css:n.root}),r)))}));var $=Object(y.a)((function(e,t){var n=Object(N.c)(),a=function(e){var t=e.isDisabled,n=e.isFocusable,a=V(e,["isDisabled","isFocusable"]),r=W(),o=r.setSelectedIndex,i=r.isManual,s=r.id,l=r.setFocusedIndex,u=r.enabledDomContext,d=r.domContext,p=r.selectedIndex,m=c.useRef(null),f=Object(F.a)({disabled:Boolean(t),focusable:Boolean(n),context:u,element:m.current}),b=Object(F.a)({context:d,element:m.current}),j=b===p,h=Object(R.a)(U({},a,{ref:T(m,e.ref),isDisabled:t,isFocusable:n,onClick:z(e.onClick,(function(){l(f),o(b)}))}));return U({},h,{id:J(s,b),role:"tab",tabIndex:j?0:-1,type:"button","aria-selected":j,"aria-controls":K(s,b),onFocus:t?void 0:z(e.onFocus,(function(){!i&&(!t||!n)&&o(b)}))})}(X({},e,{ref:t})),r=X({outline:"0",display:"flex",alignItems:"center",justifyContent:"center"},n.tab);return c.createElement(I.a.button,X({},a,{className:P("chakra-tabs__tab",e.className),__css:r}))}));var ee=Object(y.a)((function(e,t){var n=function(e){var t=W(),n=t.setFocusedIndex,a=t.focusedIndex,r=t.orientation,o=t.enabledDomContext,i=o.descendants.length,s=c.useCallback((function(e){var t=o.descendants[e];null!=t&&t.element&&(t.element.focus(),n(e))}),[o.descendants,n]),l=c.useCallback((function(e){var t=function(){return s((a+1)%i)},n=function(){return s((a-1+i)%i)},o="horizontal"===r,c="vertical"===r,l={ArrowRight:function(){return o&&t()},ArrowLeft:function(){return o&&n()},ArrowDown:function(){return c&&t()},ArrowUp:function(){return c&&n()},Home:function(){return s(0)},End:function(){return s(i-1)}}[function(e){var t=e.key,n=e.keyCode;return n>=37&&n<=40&&0!==t.indexOf("Arrow")?"Arrow"+t:t}(e)];l&&(e.preventDefault(),l(e))}),[i,a,r,s]);return U({},e,{role:"tablist","aria-orientation":r,onKeyDown:z(e.onKeyDown,l)})}(X({},e,{ref:t})),a=X({display:"flex"},Object(N.c)().tablist);return c.createElement(I.a.div,X({},n,{className:P("chakra-tabs__tablist",e.className),__css:a}))}));var te=Object(y.a)((function(e,t){var n=function(e){var t=e.isSelected,n=e.id,a=e.children;return U({tabIndex:0},V(e,["isSelected","id","children"]),{children:!W().isLazy||t?a:null,role:"tabpanel",hidden:!t,id:n})}(X({},e,{ref:t})),a=Object(N.c)();return c.createElement(I.a.div,X({outline:"0"},n,{className:P("chakra-tabs__tab-panel",e.className),__css:a.tabpanel}))}));var ne=Object(y.a)((function(e,t){var n=Y(e);return c.createElement(I.a.div,X({},n,{width:"100%",ref:t,className:P("chakra-tabs__tab-panels",e.className)}))}));var ae=n(248),re=n(354),oe=n(356),ie=Object(oe.a)({displayName:"EditIcon",path:c.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2"},c.createElement("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),c.createElement("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}))}),se=Object(oe.a)({displayName:"SmallAddIcon",viewBox:"0 0 20 20",path:c.createElement("path",{fill:"currentColor",d:"M14 9h-3V6c0-.55-.45-1-1-1s-1 .45-1 1v3H6c-.55 0-1 .45-1 1s.45 1 1 1h3v3c0 .55.45 1 1 1s1-.45 1-1v-3h3c.55 0 1-.45 1-1s-.45-1-1-1z",fillRule:"evenodd"})}),ce=n(267),le=n(229),ue=n(40),de=n(88),pe={outerContainer:{mx:{lg:10,md:4},h:"90vh",overflowY:"scroll"},innerContainer:{py:10,rowGap:{sm:10,md:0},h:{lg:"65vh",sm:"auto"},columns:{lg:2,md:1},justifyItems:"center"},iconbtn:{cursor:"pointer",bgGradient:"linear(primary.600, secondary.400)",pos:"absolute",borderRadius:"50%",transition:"all .3s ease-out",_hover:{bgGradient:"linear(secondary.400, primary.500)"},_active:{bgGradient:"linear(secondary.400, primary.500)"}}},me=l.a.lazy((function(){return Promise.all([n.e(4),n.e(38)]).then(n.bind(null,257))})),fe=l.a.lazy((function(){return Promise.all([n.e(1),n.e(9),n.e(39)]).then(n.bind(null,282))})),be=l.a.lazy((function(){return n.e(37).then(n.bind(null,232))})),je=u.a().shape({firstName:u.c().required("Please provide your firstname"),lastName:u.c().required("Please provide your lastname"),email:u.c().email("Please provide a valid email").required("Please provide your email")}),he=u.a().shape({currentPassword:u.c().required("provide your current password"),password:u.c().min(6,"Password should atleast contain a minimum of 6 characters").required("Please protect your account with a password"),passwordConfirm:u.c().when("password",{is:function(e){return!!(e&&e.length>0)},then:u.c().oneOf([u.b("password")],"passwords do not match")}).required("Confirm your password")});t.default=function(){var e=Object(c.useContext)(ue.a),t=e.user,n=e.updateUser,o=Object(b.b)().colorMode,l=Object(ce.a)(),u=l.image,d=l.setImage,y=l.showImageCropper,C=l.closeImageCropper,S=l.imageSettings,N=l.setImageSettings,I=l.imageUrl,E=l.setCroppedImage,P=l.croppedImage,k=l.openImageCropper,A=l.resetValues,_={firstName:t.firstName,middleName:t.middleName||"",lastName:t.lastName,email:t.email},R=function(){var e=Object(s.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("photo",u),t.append("imageSettings",JSON.stringify(S)),e.prev=3,e.next=6,p()({url:"/api/v1/users/updateSettings",method:"PATCH",data:t});case 6:a=e.sent,n(a.data.user),A(),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(3);case 13:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),F=Object(le.a)(),D=F.setAlert,G=F.isAlertOpen,M=F.alertDetails,T=Object(f.g)();return Object(a.jsxs)(c.Suspense,{fallback:Object(a.jsx)(de.default,{}),children:[G&&Object(a.jsx)(be,{alertDetails:M}),u&&I&&Object(a.jsx)(fe,{showImageCropper:y,closeImageCropper:C,imageSettings:S,setImageSettings:N,photo:I,setCroppedImage:E}),Object(a.jsxs)(j.a,Object(r.a)(Object(r.a)({bgColor:"light"===o?"secondary.100":"gray.700"},pe.outerContainer),{},{className:"hide-scrollbar",p:5,children:[Object(a.jsx)(j.a,{mb:{lg:20,sm:2},textAlign:"center",children:Object(a.jsx)(h.a,{children:"My Profile"})}),Object(a.jsxs)(v.a,Object(r.a)(Object(r.a)({},pe.innerContainer),{},{children:[Object(a.jsxs)(j.a,{alignSelf:"center",w:"max-content",pos:"relative",children:[Object(a.jsx)(g.a,{borderRadius:"0",boxSize:"400px",src:P||t&&t.photo,alt:t&&t.firstName}),Object(a.jsx)("input",{onChange:function(e){return d(e.target.files[0])},type:"file",name:"image-upload",id:"image-upload",style:{display:"none"}}),Object(a.jsxs)(O.a,{children:[u&&Object(a.jsx)(w.a,{hasArrow:!0,label:"Save Photo",children:Object(a.jsx)(x.a,Object(r.a)(Object(r.a)({bottom:"20px",right:"100px",onClick:R},pe.iconbtn),{},{"aria-label":"save photo",icon:Object(a.jsx)(re.a,{color:"#fff"})}))}),u&&Object(a.jsx)(w.a,{hasArrow:!0,label:"Edit Photo",children:Object(a.jsx)(x.a,Object(r.a)(Object(r.a)({bottom:"20px",right:"55px",onClick:k},pe.iconbtn),{},{"aria-label":"edit photo",icon:Object(a.jsx)(ie,{color:"#fff"})}))}),Object(a.jsx)(w.a,{hasArrow:!0,label:"Change Photo",children:Object(a.jsx)(x.a,Object(r.a)(Object(r.a)({bottom:"20px",right:"10px",as:"label",htmlFor:"image-upload"},pe.iconbtn),{},{"aria-label":"change photo",icon:Object(a.jsx)(se,{color:"#fff"})}))})]})]}),Object(a.jsx)(j.a,{alignSelf:"center",w:"100%",children:Object(a.jsxs)(Z,{children:[Object(a.jsxs)(ee,{children:[Object(a.jsx)($,{children:"Update Settings"}),Object(a.jsx)($,{children:"Update Password"})]}),Object(a.jsxs)(ne,{children:[Object(a.jsx)(te,{children:Object(a.jsx)(m.c,{validationSchema:je,initialValues:_,onSubmit:function(){var e=Object(s.a)(i.a.mark((function e(t,a){var r,o,s,c,l,u,d,m,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.setSubmitting,o=a.resetForm,s=t.firstName,c=t.middleName,l=t.lastName,u=t.email,(d=new FormData).append("firstName",s),c&&""!==c.trim()&&d.append("middleName",c),d.append("lastName",l),d.append("email",u),e.prev=7,e.next=10,p()({url:"/api/v1/users/updateSettings",method:"PATCH",data:d});case 10:m=e.sent,n(m.data.user),f={firstName:m.data.user.firstName,middleName:m.data.user.middleName||"",lastName:m.data.user.lastName,email:m.data.user.email},A(),o({values:f}),D("success","user details updated succesfully"),r(!1),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(7),D("error","could not update user details"),r(!1);case 23:case"end":return e.stop()}}),e,null,[[7,19]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.dirty,n=e.isValid,r=e.isSubmitting;return Object(a.jsxs)(j.a,{as:m.b,minH:"400px",autoComplete:"off",children:[Object(a.jsx)(me,{name:"firstName",label:"firstName"}),Object(a.jsx)(me,{required:!1,name:"middleName",label:"middleName"}),Object(a.jsx)(me,{name:"lastName",label:"lastName"}),Object(a.jsx)(me,{name:"email",label:"Email"}),n&&t&&Object(a.jsx)(ae.a,{isLoading:r,type:"submit",colorScheme:"primary",children:"Save"})]})}})}),Object(a.jsx)(te,{children:Object(a.jsx)(m.c,{validationSchema:he,initialValues:{currentPassword:"",password:"",passwordConfirm:""},onSubmit:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.setSubmitting,o=n.resetForm,s=Object(r.a)({},t),e.prev=2,e.next=5,p()({url:"/api/v1/users/updateCurrentUserPassword",method:"POST",data:s});case 5:o(),D("success","user password updated succesfully. You will be logged out..."),a(!1),setTimeout((function(){T.replace("/auth/logout")}),2e3),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),D("error",e.t0.response.data.message),a(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.dirty,n=e.isValid,r=e.isSubmitting;return Object(a.jsxs)(j.a,{minH:"400px",as:m.b,autoComplete:"off",children:[Object(a.jsx)(me,{name:"currentPassword",label:"Current Password",type:"password"}),Object(a.jsx)(me,{type:"password",name:"password",label:"New Password"}),Object(a.jsx)(me,{name:"passwordConfirm",label:"Password Confirm",type:"password"}),Object(a.jsx)(ae.a,{disabled:!t&&n||t&&!n,isLoading:r,type:"submit",colorScheme:"primary",children:"Save"})]})}})})]})]})})]}))]}))]})}}}]);
//# sourceMappingURL=24.e918b295.chunk.js.map